<mat-card class="card">
    <p class="head-card font-weight-bold">{{CardHeaderLabel}}</p>
    <div class="font-style font-weight-bold" [formGroup]="addDeviceForm">
        <p>ระบุชื่ออุปกรณ์</p>
        <mat-form-field [floatLabel]="'never'" class="full">
            <input onfocus="placeholder=''" class="full" formControlName="nameDevice" matInput
                placeholder="เช่น Macbook Pro 2017 13" [(ngModel)]="data.name" required>
        </mat-form-field>
        <p>ระบุ serial</p>
        <mat-form-field [floatLabel]="'never'" class="full">
            <input onfocus="placeholder=''" class="full" formControlName="serial" matInput
                placeholder="ระบุ serial เช่น W88401231AX" [(ngModel)]="data.serial" required>
        </mat-form-field>
        <p>ระบุสเปคเครื่อง</p>
        <mat-form-field [floatLabel]="'never'" class="full">
            <input onfocus="placeholder=''" class="full" matInput formControlName="spec"
                placeholder="ระบุสเปคเครื่อง เช่น Intel i5 2.3 GHz Memory 8 Gb 13 inch" [(ngModel)]="data.spec"
                required>
        </mat-form-field>

        <p>ที่อยู่ของอุปกรณ์</p>
        <mat-form-field [floatLabel]="'never'" class="full">
            <input matInput onfocus="placeholder=''" formControlName="location" placeholder=" เช่น The Street" required>
        </mat-form-field>


        <p>รูปภาพเครื่อง</p>


        <div class="form-group text-left row">
            <div class="col-7 col-lg-3 col-md-5 file-field">
                <div style="margin: 7px 0;">
                    <label (click)="_fileInput.click()" class="py-0 px-0 my-0">
                        <img id="img-show-upload" class="upload-image rounded center-cropped" [src]="imageDefault">
                    </label>
                </div>
            </div>
        </div>

        <div class="d-flex flex-row">
            <button id="btn-upload-file" mat-flat-button (click)='uploadCropImg()' (click)="_fileInput.click()"
                data-toggle="modal" data-target="#uploadModal" style="background-color: #212121;color:white">Upload
                Image</button>
            <p style="margin-top: 7px; margin-left: 7px; text-align: center;">{{fileName}}</p>
        </div>

        <div class="btn-gruop">
            <button [disabled]="!addDeviceForm.valid || !vaildatBT" type="submit" class="btn" mat-flat-button
                style="background-color: #0E98D5;color:white;" (click)="onSubmit()">Save</button>
            <button class="btn btn-default-black" mat-flat-button (click)="cancel()">{{btnLabel}}</button>
        </div>
        <button id="openUploadModal" [hidden]="false" data-toggle="modal" data-target="#uploadModal">Open Modal</button>
    </div>
</mat-card>


<!-- Form -->


<div class="modal fade" id="uploadModal" role="dialog" style="  position: absolute;">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div *ngIf="cropping.isLoaded" class="container">
                <div class="row">
                    <div class="col-1 p-0">
                        <button class="p-0" (click)="cropping.zoomIn()" ly-button appearance="icon">
                            <ly-icon>zoom_in</ly-icon>
                        </button>
                    </div>
                    <div class="col-1 p-0">
                        <button class="p-0" (click)="cropping.zoomOut()" ly-button appearance="icon">
                            <ly-icon>zoom_out</ly-icon>
                        </button>
                    </div>
                    <div class="col-1 p-0">
                        <button class="p-0" (click)="cropping.center()" ly-button appearance="icon">
                            <ly-icon>filter_center_focus</ly-icon>
                        </button>
                    </div>
                    <div class="col-1 p-0">
                        <button class="p-0" (click)="cropping.rotate(-90)" ly-button appearance="icon">
                            <ly-icon>rotate_90_degrees_ccw</ly-icon>
                        </button>
                    </div>
                    <div class="col-2 p-0">
                        <button class="p-0" (click)="cropping.fit()" ly-button>Fit</button>
                    </div>
                    <div class="col-2 p-0">
                        <button class="p-0" (click)="cropping.fitToScreen()" ly-button>Fit to screen</button>
                    </div>
                    <div class="col-2 p-0">
                        <button class="p-0" (click)="cropping.setScale(1)" ly-button>1:1</button>
                    </div>
                    <div class="col-2 p-0">
                        <button class="p-0" (click)="cropping.clean()" ly-button>Clean</button>
                    </div>
                </div>
    
                <ly-img-cropper id="upload-crop-img" [withClass]="classes.cropping" #cropping [config]="myConfig"
                    (cropped)="onCropped($event)">
                    <span>Drag and drop image</span>
                </ly-img-cropper>
    
                <div [className]="classes.actions" class="row">
    
                    <span [className]="classes.flex"></span>
                    <!-- Hidden input -->
                    <input id="button-select-crop" #_fileInput type="file" (change)="cropping.selectInputEvent($event)"
                        accept="image/*" hidden>
                </div>
    
                <button id="button-cropping" *ngIf="cropping.isLoaded" color="accent" (click)="cropping.crop()" ly-button
                    data-dismiss="modal">
                    <ly-icon>crop</ly-icon>crop
                </button>
            </div>

            <ly-img-cropper [withClass]="classes.cropping" #cropping [config]="myConfig" (cropped)="onCropped($event)">
                <span>Drag and drop image</span>
            </ly-img-cropper>

            <div [className]="classes.actions" class="row">
                <span [className]="classes.flex"></span>
                <!-- Hidden input -->
                <input id="button-select-crop" #_fileInput type="file"
                    (change)="cropping.selectInputEvent($event) || openUploadModal($event)" accept="image/*" hidden>
            </div>

            <button id="button-cropping" *ngIf="cropping.isLoaded" color="accent" (click)="cropping.crop()" ly-button
                data-dismiss="modal">
                <ly-icon>crop</ly-icon>crop
            </button>
        </div>
    </div>
</div>

<!-- comment old 9/July/2562-->
<!-- <div class="container font-style">


    <form class="example-container" [formGroup]="options" (change)="canSubmit()">
        <div style="text-align:center">

            <br>

            <div class="card bg-light shadow-lg " style="max-width: 100%;">
                <div class="card-header mb-3 font-weight-bold">ลงทะเบียนอุปกรณ์</div>
                <div class="card-body">
                    <div class="form-group text-left">
                        <label for="name" class="font-weight-bold">ชื่ออุปกรณ์</label>
                        <input type="text" id="name" name="name" placeholder="ระบุชื่ออุปกรณ์"
                            formControlName="name" [(ngModel)]="name">
                    </div>
                    <div class="form-group text-left">
                        <label for="serial" class="text-left font-weight-bold">Serial</label>
                        <input type="text" id="serial" name="serial" placeholder="ระบุ serial.."
                            formControlName="serial" [(ngModel)]="serial">
                    </div>
                    <div class="form-group text-left">
                        <label for="spec" class="font-weight-bold">สเปค</label>
                        <textarea rows="5" id="spec" name="Spec" placeholder="ระบุสเปคเครื่อง"
                            formControlName="spec" [(ngModel)]="spec"></textarea>
                    </div>
                    <div class="form-group text-left row">
                        <div class="col-auto my-auto font-weight-bold font-weight-bold">
                            รูปภาพเครื่อง
                        </div>
                        <div class="form-group text-left">
                            <label for="serial" class="text-left font-weight-bold">Serial</label>
                            <input type="text" id="serial" name="serial" placeholder="ระบุ serial.."
                                formControlName="serial" [(ngModel)]="serial">
                        </div>
                        <div class="form-group text-left">
                            <label for="spec" class="font-weight-bold">สเปค</label>
                            <textarea rows="5" id="spec" name="Spec" placeholder="ระบุสเปคเครื่อง"
                                formControlName="spec" [(ngModel)]="spec"></textarea>
                        </div>
                        <div class="form-group text-left row">
                            <div class="col-auto my-auto font-weight-bold font-weight-bold">
                                รูปภาพเครื่อง
                            </div>
                            <div class="col-7 col-lg-2 col-md-5 file-field">
                                <div>
                                    <label (click)='uploadCropImg()' class="py-0 px-0 my-0" data-toggle="modal"
                                        data-target="#uploadModal">
                                        <img id="img-show-upload" class="upload-image rounded center-cropped"
                                            [src]="imageDefault">
                                    </label>
                                </div>
                                <div>
                                    <label id="btn-upload-file" (click)='uploadCropImg()'
                                        class="py-0 px-0 my-0 btn btn-dark btn-md btn-block" data-toggle="modal"
                                        data-target="#uploadModal">
                                        <span>upload file</span>
                                    </label>
                                </div>
                            </div>
    
                        </div>
    
                        <div class="form-group text-left row">
                            <div class="font-weight-bold col-auto pr-0">สถานะ</div>
                            <div class="col-auto ml-0">
                                <mat-radio-group (change)="onSelectionChange()" id="status" formControlName="status"
                                    [(ngModel)]="checker">
                                    <mat-radio-button name="available" value=true checked>ว่าง</mat-radio-button>
                                    &nbsp;&nbsp;
                                    <mat-radio-button name="unavailable" value=false>ไม่ว่าง</mat-radio-button>
                                </mat-radio-group>
    
                            </div>
                        </div>
    
                        <div class="form-group text-left" [ngClass]="{disabledDiv: status}">
                            <label for="holder" class="text-left font-weight-bold">ผู้ยืม</label>
                            <input type="text" id="holder" name="holder" placeholder="ระบุชื่อผู้ยืม"
                                formControlName="holder" [(ngModel)]="holder">
                            <label for="tel" class="text-left font-weight-bold">เบอร์ผู้ยืม</label>
                            <input type="text" id="tel" name="tel" placeholder="ระบุเบอร์ติดต่อ" formControlName="tel"
                                [(ngModel)]="tel" (keypress)="checkPhoneNum($event)" maxLength='10' minlength="10">
                        </div>
    
                        <div class="form-group text-right">
                            <button type="button" class="btn btn-default-blue" (click)="onSubmit()"
                                [ngClass]="{disabledBT: !vaildatBT}">Save </button>&nbsp;&nbsp;
                            <button type="button" class="btn btn-default-black" (click)="resetForm()">Clear</button>
                        </div>
    
                    </div>
                </div>
            </div>
        </form>
    </div> -->
    
    
    <!-- New form -->
    
    
    <!-- End Form -->
    
    
    <!-- modol cropping image -->
    <!-- <div class="modal fade" id="uploadModal" role="dialog">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div *ngIf="cropping.isLoaded" class="container">
                    <div class="row">
                        <div class="col-1 p-0">
                            <button class="p-0" (click)="cropping.zoomIn()" ly-button appearance="icon">
                                <ly-icon>zoom_in</ly-icon>
                            </button>
                        </div>
                        <div class="col-1 p-0">
                            <button class="p-0" (click)="cropping.zoomOut()" ly-button appearance="icon">
                                <ly-icon>zoom_out</ly-icon>
                            </button>
                        </div>
                        <div class="col-1 p-0">
                            <button class="p-0" (click)="cropping.center()" ly-button appearance="icon">
                                <ly-icon>filter_center_focus</ly-icon>
                            </button>
                        </div>
                        <div class="col-1 p-0">
                            <button class="p-0" (click)="cropping.rotate(-90)" ly-button appearance="icon">
                                <ly-icon>rotate_90_degrees_ccw</ly-icon>
                            </button>
                        </div>
                        <div class="col-2 p-0">
                            <button class="p-0" (click)="cropping.fit()" ly-button>Fit</button>
                        </div>
                        <div class="col-2 p-0">
                            <button class="p-0" (click)="cropping.fitToScreen()" ly-button>Fit to screen</button>
                        </div>
                        <div class="col-2 p-0">
                            <button class="p-0" (click)="cropping.setScale(1)" ly-button>1:1</button>
                        </div>
                        <div class="col-2 p-0">
                            <button class="p-0" (click)="cropping.clean()" ly-button>Clean</button>
                        </div>
                    </div>
                </div>
    
                <ly-img-cropper [withClass]="classes.cropping" #cropping [config]="myConfig"
                    (cropped)="onCropped($event)">
                    <span>Drag and drop image</span>
                </ly-img-cropper>
    
                <div [className]="classes.actions" class="row">
                    <button id="upload-crop-img" ly-button color="primary" (click)="_fileInput.click()" class="col-12">
                        <ly-icon>image</ly-icon>
                        <span>Select File</span>
                    </button>
                    <span [className]="classes.flex"></span>
                    Hidden input 
                    <input id="button-select-crop" #_fileInput type="file" (change)="cropping.selectInputEvent($event)"
                        accept="image/*" hidden>
                </div>
    
                <button id="button-cropping" *ngIf="cropping.isLoaded" color="accent" (click)="cropping.crop()"
                    ly-button data-dismiss="modal">
                    <ly-icon>crop</ly-icon>crop
                </button>
            </div>
        </div>
    </div> 
    End modol cropping image -->